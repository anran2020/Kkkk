/**
 ******************************************************************************
 * 文件:iap.h
 * 作者:   zzx
 * 版本:   V0.01
 * 日期:     2014-12-01
 * 内容简介:
 *
 ******************************************************************************
 *  					文件历史
 *
 * 版本号-----  日期   -----   作者    ------   说明
 * v0.1     2014-12-01          zzx                 创建该文件
 *
 *
 *
 ******************************************************************************
 **/

#ifndef  __IAP_H__
#define  __IAP_H__

//----------------------------------------------------------------------------
//includes
//----------------------------------------------------------------------------
#include "mlos_dtd.h"
#include "iap_def.h"


//----------------------------------------------------------------------------
//文件条件编译
//----------------------------------------------------------------------------
#if 1

//----------------------------------------------------------------------------
//define config
//----------------------------------------------------------------------------

#define IAP_TASK_PRIO 		(TASK_PRIO_4)

//----------------------------------------------------------------------------
//define
//----------------------------------------------------------------------------



//----------------------------------------------------------------------------
//
//----------------------------------------------------------------------------


//----------------------------------------------------------------------------
// extern variable
//----------------------------------------------------------------------------

#ifdef COMPILE_BOOT_CODE

extern AppFileInfo appFileinfo;
#endif


//----------------------------------------------------------------------------
// export fun 
//----------------------------------------------------------------------------
void iap_init(void);

#ifdef COMPILE_BOOT_CODE

void iap_be_ready(void);														//iap，就绪
MLBool iap_run_app(void);														//运行app		
IapError iap_start(mlu32 binfileSize,mlu32 packetSize);							//启动升级
IapError iap_data(mlu32 packetSeq,mlu32 validBytes,mlu32* pData);				//升级文件数据
void iap_backup(mlu32 packetSeq,mlu32 packetSize,mlu32* pData);					//备份

#else

MLBool iap_run_boot(void);

#endif

//----------------------------------------------------------------------------
//							end  of file
//----------------------------------------------------------------------------
#endif//条件编译
#endif//编译一次


