/**
 ******************************************************************************
 * 文件:mlos_clock.h
 * 作者:   zzx
 * 版本:   V0.01
 * 日期:     2014-12-01
 * 内容简介:
 *
 ******************************************************************************
 *  					文件历史
 *
 * 版本号-----  日期   -----   作者    ------   说明
 * v0.1                       2014-12-01          zzx                 创建该文件
 *
 *
 *
 ******************************************************************************
 **/


#ifndef _MLOS_CLOCK_H_
#define _MLOS_CLOCK_H_

//---------------------------------------------------------
//inclludes
//---------------------------------------------------------

#include "mlos_dtd.h"
#include "mlos_default_config.h"
#include "mlos_port.h"//该头文件，需要根据移植到不同的mcu平台，用户去实现提供系统调用的接口


//---------------------------------------------------------
//defines
//---------------------------------------------------------

//系统us时钟时间
typedef mlu16 UsClockTime;


//系统ms时钟
typedef mlvu32 MsClockTime;


//----------------------------------------------------------------------------
//系统实时时钟
//----------------------------------------------------------------------------
typedef struct {

	mlu32 s;
	mlu16 ms;
	mlu8 month;//月，预留同步系统时钟
	mlu8 year;//年，预留同步系统时钟
	
}RealTimeClock,Time,*TimePtr;
//----------------------------------------------------------------------------
//extern variable
//----------------------------------------------------------------------------

//系统ms基时时钟时间
extern MsClockTime msClockTime;

//系统实时时钟时间
extern  RealTimeClock sysRealTime;

//-----------------------------------------------------------------------------
// 函数名：clock_tick
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：初始化系统时间
//
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
_inline void mlos_clock_tick(void)
{
	//系统ms时钟
	msClockTime++;

	//系统实时时钟
	sysRealTime.ms++;
	if (sysRealTime.ms>=1000)
	{
		sysRealTime.ms=0;
		sysRealTime.s++;
	}
}

//-----------------------------------------------------------------------------
// 函数名：mlos_ms_clock，系统ms时钟时间
//-----------------------------------------------------------------------------
//
// 返回值 : 
// ClockBaseData :返回系统ms时钟时间，单位ms
// 参数   :  void
//
//
//
//功能描述：
//			获取，系统ms 时钟时间
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
_inline mlu32 mlos_ms_clock(void)
{
	return (msClockTime);
}

//-----------------------------------------------------------------------------
// 函数名：mlos_time，系统时间
//-----------------------------------------------------------------------------
//
// 返回值 : 
// ClockBaseData :返回系统时间，
// 参数   :  void
//
//
//
//功能描述：
//			获取系统时间
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
_inline TimePtr mlos_time(void)
{
	return (&sysRealTime);
}


//----------------------------------------------------------------------------
//extern function
//----------------------------------------------------------------------------



//----------------------------------------------------------------------------
//export function 
//----------------------------------------------------------------------------


void mlos_clock_init(void);


//延时微秒，需要根据不同的mcu，用硬件定时器实现，
void mlos_us_delay(mlu16 dt);



//----------------------------------------------------------------------------
//							end  of file
//----------------------------------------------------------------------------
#endif // 

