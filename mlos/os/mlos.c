/**
 ******************************************************************************
 * 文件:mlos.c
 * 作者:   zzx
 * 版本:   V0.01
 * 日期:     2014-12-01
 * 内容简介:
 *
 ******************************************************************************
 *  					文件历史
 *
 * 版本号-----  日期   -----   作者    ------   说明
 * v0.1                       2014-12-01          zzx                 创建该文件
 *
 *
 *
 ******************************************************************************
 **/

//----------------------------------------------------------------------------
//includes
//----------------------------------------------------------------------------
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "mlos.h"
#include "mlos_port.h"//该头文件，需要根据移植到不同的mcu平台，用户去实现提供系统调用的接口



//----------------------------------------------------------------------------
//任务管理模块结构体
//----------------------------------------------------------------------------


//----------------------------------------------------------------------------
//local global  variable
//----------------------------------------------------------------------------


MLOSInfo mlos;//系统属性

//-----------------------------------------------------------------------------
// 函数名：
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：
//			bkpt，break point，断点，软件调试断点
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
void mlos_bkpt(MLBool bBreak,char *file,char *func,mlu16 line)
{

	//printf("mlos assert failed at %s:%d \n", file, line);
    while (bBreak)
	{
		;
    }
}

//----------------------------------------------------------------------------
//extern global  variable
//----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// 函数名：
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：
//
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
void mlos_assert_failed(char* file, mlu16 line)
{

	//printf("mlos assert failed at %s:%d \n", file, line);
    while (mltrue)
	{
		;
    }
}

//-----------------------------------------------------------------------------
// 函数名：
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：
//
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
void mlos_mem_copy(unsigned char * des,unsigned char*src,int len)
{
	while (len--)
	{
		* des++=*src++;
	}
}

//-----------------------------------------------------------------------------
// 函数名：
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：
// 	初始化系统
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
void mlos_exit(void)
{
	while(1)
	{
		//

	}
}

//-----------------------------------------------------------------------------
// 函数名：
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：
// 	初始化系统
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------
void mlos_init(void)
{
	//
	memset(&mlos,0,sizeof(MLOSInfo));
	mlos.taskPrioLevel=TASK_PRIO_LEVEL_MAX;
	
	//时钟 初始化
	mlos_clock_init();
	
	//内存初始化
	mlos_mem_init();
	
	//任务管理模块初始化
	mlos_task_init();

	//创建定时器任务，系统自带，定时器任务
	rtimer_task_create();

	//服务初始化
	shell_init();
	log_init();
	

}

//-----------------------------------------------------------------------------
// 函数名：
//-----------------------------------------------------------------------------
//
// 返回值 : void
// 参数   :  void
//
//
//
//功能描述：
//
//
//修改履历：
//1.zzx ：  2014-12-01  ：创建函数
//
//-----------------------------------------------------------------------------



//----------------------------------------------------------------------------
//							end  of file
//----------------------------------------------------------------------------



